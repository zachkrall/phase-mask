import{c as f,a as w,r as a,j as o,b as u,u as p,d as m,E as x,e as v,l as S,h as b,f as E,g as L,i as M,k,m as R,n as D,o as N,p as O,q as A,s as K,t as P,v as B,w as V,x as q,y as $,z as j,A as I,B as T,C as X,D as Y,R as _,M as z,F as G,P as H,G as W}from"./vendor.5b43e476.js";const Z=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(t){if(t.ep)return;t.ep=!0;const i=n(t);fetch(t.href,i)}};Z();const F=f({name:"facemesh",initialState:{},reducers:{one(e,s){}}}),{actions:xe,reducer:J}=F,U=e=>(e.text===void 0&&(e.text="undefined"),e),Q=f({name:"repl",initialState:{isVisible:!0,history:[]},reducers:{replEval(e,s){let n=s.payload,r={text:n,timestamp:new Date().toLocaleTimeString(),state:void 0};console.log(n);try{r.text=JSON.stringify(window.eval(n))}catch(t){r.state="error",r.text=JSON.stringify(t)}finally{r=U(r),e.history.push(r)}},toggleRepl(e,s){e.isVisible=!e.isVisible}}}),{actions:ee,reducer:te}=Q,{replEval:se,toggleRepl:g}=ee,re=w({reducer:{facemesh:J,repl:te}});function oe(e){return a.exports.createElement("svg",Object.assign({width:68,height:90,viewBox:"0 0 68 90",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.exports.createElement("path",{d:"M66.1259 39.4423C65.0113 17.2283 58.0377 12.5905 48.276 6.40135C38.5176 0.218804 14.5324 2.74818 14.5324 2.74818C7.98956 3.17582 4.49454 6.26544 3.23857 10.3396C1.9826 14.4171 1.84451 28.0552 1.70313 29.4608C1.56504 30.8663 4.63263 34.5228 5.18828 37.755C5.74722 40.9872 5.18828 45.2072 5.18828 47.8791C5.18828 50.551 10.0675 61.9382 10.7645 64.7494C11.4616 67.5605 15.6438 73.4646 16.0646 74.8735C16.4822 76.2791 19.6911 83.3103 19.6911 83.3103C19.6911 83.3103 25.2674 90.3415 36.9821 85.5612C48.6936 80.7809 59.8493 69.6755 61.2434 66.5826C62.6408 63.4863 67.2405 61.6564 66.1259 39.4423ZM10.7317 38.9285C9.29156 39.207 7.60159 38.4246 7.10183 37.6986C6.60207 36.9726 6.85195 36.7771 6.85195 36.7771C7.12814 36.1903 7.84818 35.9682 10.3963 36.1339C12.9444 36.303 15.3281 36.4124 15.1867 36.9726C15.0519 37.5329 12.1717 38.6501 10.7317 38.9285ZM40.5922 37.2809C39.1784 38.1196 36.2719 38.5937 36.2719 38.5937C34.7496 38.5937 33.3358 38.3716 32.0338 38.0633C30.7318 37.755 30.1795 37.1682 29.9296 36.4986C29.6797 35.829 30.5938 34.9902 31.2053 34.5991C31.8136 34.2079 35.1935 34.5162 37.6857 34.5991C40.1779 34.682 42.0915 35.0466 42.4499 35.4643C42.8082 35.8853 42.006 36.4422 40.5922 37.2809Z",fill:"#fff"}))}const ne=({children:e})=>o("div",{className:"nav-item",children:e}),ie=()=>o("nav",{id:"PM_TOOLBAR",children:u(ne,{children:[o(oe,{height:"2em",width:"2em",style:{marginRight:"0.5em"}}),"Phase Mask"]})}),ae=()=>{const[{mouseX:e,mouseY:s},n]=a.exports.useState({mouseX:0,mouseY:0});return a.exports.useEffect(()=>{const r=t=>{n({mouseX:t.clientX,mouseY:t.clientY})};return window.addEventListener("mousemove",r),()=>window.removeEventListener("mousemove",r)},[e,s]),{mouseX:e,mouseY:s}};const y=({children:e})=>o("div",{className:"status",children:e}),ce=()=>{const e=p(),{mouseX:s,mouseY:n}=ae();a.exports.useState([]);const r=m(t=>t.repl.isVisible);return u("div",{id:"PM_STATUSBAR",children:[o(y,{children:"Camera"}),u(y,{children:["X: ",s," Y: ",n]}),u("button",{onClick:()=>e(g()),children:[r?"Hide":"Show"," Repl"]})]})};const le=e=>(console.log("live-code block running"),!0),ue=[{key:"Ctrl-Enter",run:le}],de=()=>{const e=a.exports.useRef(null),s=a.exports.useRef(null),n=p();return a.exports.useEffect(()=>(e.current&&(s.current=new x({state:v.create({extensions:[S(),b(),E(),L(),M(),k(),v.allowMultipleSelections.of(!0),R(),D(),N(),O(),A(),K(),P(),B.of([...V,...q,...$,...j,...I,...T,...X,...Y,...ue])]}),parent:e.current})),console.log(s.current),()=>{var r;(r=s.current)==null||r.destroy()}),[]),u("div",{id:"PM_CODEBOX",children:[o("button",{onClick:()=>n(se(s.current.state.doc.toString())),children:"EVAL"}),o("div",{ref:e})]})};const he=()=>{const e=p(),s=a.exports.useRef(null),n=m(t=>t.repl.history),r=m(t=>t.repl.isVisible);return a.exports.useEffect(()=>{if(s.current){let t=s.current,i=t.querySelector(":last-child");t.scrollTo({top:i==null?void 0:i.offsetTop})}return()=>{}},[n]),o(_,{keyName:"command+shift+e",onKeyDown:(t,i,d)=>{e(g())},children:o("aside",{id:"PM_REPL",ref:s,className:[r?"":"hidden"].join(" "),children:o("div",{className:"data",children:n.map((t,i)=>u("div",{children:[o("span",{style:{opacity:.3},children:t.timestamp})," ",t.text]},t.text+i))})})})},me=()=>{const[{width:e,height:s},n]=a.exports.useState({width:0,height:0});return a.exports.useEffect(()=>{const r=()=>{n({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),{width:e,height:s}};const pe=()=>{me();const e=a.exports.useRef(null);return a.exports.useEffect(()=>{e.current&&(e.current.material=new z)},[]),o("div",{id:"PM_CANVAS",children:o(G,{children:o("mesh",{ref:e})})})},fe=()=>{const e=a.exports.useRef(null),[s,n]=a.exports.useState(null),[r,t]=a.exports.useState(null),[i,d]=a.exports.useState([]);return{stream:e,devices:i,requestCamera:h=>{let l={audio:!1,video:!0};h&&(l.video={deviceId:{exact:h}}),navigator.mediaDevices.getUserMedia(l).then(c=>{console.log(l),console.log("hook stream",c),e.current=c,n(c.id)}).catch(c=>{t(c)})},requestDeviceList:()=>{let h=l=>[...l].filter(c=>c.kind==="videoinput").map((c,C)=>({name:c.label||"camera "+(C+1),id:c.deviceId}));navigator.mediaDevices.enumerateDevices().then(l=>{d(()=>h(l))}).catch(l=>{t(l)})},error:r,id:s}};const ve=()=>{const e=fe(),s=m(n=>n.facemesh);return a.exports.useEffect(()=>{e.requestDeviceList(),console.log(s)},[]),u("div",{id:"app",children:[o(pe,{}),u("div",{id:"container",children:[o(ie,{}),o(de,{}),o(ce,{}),o(he,{})]})]})},ge=()=>o(H,{store:re,children:o(ve,{})});W.exports.render(o(ge,{}),document.querySelector("#root"));
